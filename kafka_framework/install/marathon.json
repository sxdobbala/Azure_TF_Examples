{
  "id": "/service.name",
  "cmd": "export LD_LIBRARY_PATH=$MESOS_SANDBOX/libmesos-bundle/lib:$LD_LIBRARY_PATH; export MESOS_NATIVE_JAVA_LIBRARY=$(ls $MESOS_SANDBOX/libmesos-bundle/lib/libmesos-*.so); export JAVA_HOME=$(ls -d $MESOS_SANDBOX/jre*/); export JAVA_HOME=${JAVA_HOME%/}; export PATH=$(ls -d $JAVA_HOME/bin):$PATH && export JAVA_OPTS=\"-Xms256M -Xmx512M\" && ./confluent-kafka-scheduler/bin/confluent-kafka ./confluent-kafka-scheduler/svc.yml",
  "cpus": 1,
  "mem": 1024,
  "disk": 0,
  "instances": 1,
  "env": {
    "TASKCFG_ALL_KAFKA_CONFLUENT_METRICS_REPORTER_TOPIC": "_confluent-metrics",
    "TASKCFG_ALL_KAFKA_REPLICA_SOCKET_RECEIVE_BUFFER_BYTES": "65536",
    "TASKCFG_ALL_KAFKA_REPLICA_SOCKET_TIMEOUT_MS": "30000",
    "TASKCFG_ALL_KAFKA_LOG_PREALLOCATE": "false",
    "TASKCFG_ALL_KAFKA_CONFLUENT_SUPPORT_METRICS_ENABLE": "false",
    "TASKCFG_ALL_KAFKA_UNCLEAN_LEADER_ELECTION_ENABLE": "true",
    "TASKCFG_ALL_KAFKA_GROUP_MAX_SESSION_TIMEOUT_MS": "300000",
    "TASKCFG_ALL_KAFKA_LOG_CLEANER_DELETE_RETENTION_MS": "86400000",
    "TASKCFG_ALL_KAFKA_LOG_CLEANER_THREADS": "1",
    "TASKCFG_ALL_KAFKA_QUOTA_WINDOW_SIZE_SECONDS": "1",
    "TASKCFG_ALL_KAFKA_CONFLUENT_METRICS_REPORTER_TOPIC_REPLICAS": "3",
    "TASKCFG_ALL_KAFKA_METRICS_SAMPLE_WINDOW_MS": "30000",
    "TASKCFG_ALL_KAFKA_AUTO_CREATE_TOPICS_ENABLE": "true",
    "TASKCFG_ALL_KAFKA_MESSAGE_MAX_BYTES": "1000012",
    "TASKCFG_ALL_KAFKA_LOG_FLUSH_INTERVAL_MESSAGES": "9223372036854775807",
    "TASKCFG_ALL_KAFKA_CONTROLLED_SHUTDOWN_MAX_RETRIES": "3",
    "BROKER_MEM": "brokers.mem",
    "BROKER_COUNT": "brokers.count",
    "TASKCFG_ALL_KAFKA_OFFSET_METADATA_MAX_BYTES": "4096",
    "TASKCFG_ALL_KAFKA_MAX_CONNECTIONS_PER_IP": "2147483647",
    "SERVICE_PRINCIPAL": "",
    "TASKCFG_ALL_KAFKA_MAX_CONNECTIONS_PER_IP_OVERRIDES": "",
    "TASKCFG_ALL_KAFKA_NUM_IO_THREADS": "8",
    "TASKCFG_ALL_KAFKA_CONTROLLER_SOCKET_TIMEOUT_MS": "30000",
    "TASKCFG_ALL_KAFKA_ZOOKEEPER_SYNC_TIME_MS": "2000",
    "TASKCFG_ALL_KAFKA_OFFSETS_RETENTION_MINUTES": "1440",
    "BROKER_DISK_TYPE": "brokers.disk_type",
    "TASKCFG_ALL_KAFKA_OFFSETS_TOPIC_SEGMENT_BYTES": "104857600",
    "TASKCFG_ALL_KAFKA_GROUP_MIN_SESSION_TIMEOUT_MS": "6000",
    "BROKER_CPUS": "brokers.cpus",
    "TASKCFG_ALL_KAFKA_QUOTA_CONSUMER_DEFAULT": "9223372036854775807",
    "TASKCFG_ALL_KAFKA_OFFSETS_TOPIC_NUM_PARTITIONS": "50",
    "SERVICE_NAME": "service.name",
    "PACKAGE_BUILD_TIME_EPOCH_MS": "1513117953222",
    "JAVA_URI": "https://downloads.mesosphere.com/java/jre-8u144-linux-x64.tar.gz",
    "TASKCFG_ALL_METRIC_REPORTERS": "io.confluent.metrics.reporter.ConfluentMetricsReporter,com.airbnb.kafka.kafka09.StatsdMetricsReporter",
    "TASKCFG_ALL_KAFKA_CONFLUENT_SUPPORT_CUSTOMER_ID": "anonymous",
    "TASKCFG_ALL_KAFKA_OFFSETS_COMMIT_TIMEOUT_MS": "5000",
    "TASKCFG_ALL_KAFKA_REQUEST_TIMEOUT_MS": "30000",
    "TASKCFG_ALL_KAFKA_METRICS_REPORTERS": "com.airbnb.kafka.kafka08.StatsdMetricsReporter",
    "TASKCFG_ALL_KAFKA_LOG_SEGMENT_DELETE_DELAY_MS": "60000",
    "TASKCFG_ALL_KAFKA_REPLICA_FETCH_WAIT_MAX_MS": "500",
    "CONFIG_TEMPLATE_PATH": "confluent-kafka-scheduler",
    "BROKER_DISK_PATH": "kafka-broker-data",
    "TASKCFG_ALL_KAFKA_REPLICA_HIGH_WATERMARK_CHECKPOINT_INTERVAL_MS": "5000",
    "PLACEMENT_CONSTRAINTS": "service.placement_constraint",
    "BOOTSTRAP_URI": "https://downloads.mesosphere.com/dcos-commons/artifacts/0.30.3/bootstrap.zip",
    "SECRET_NAME": "",
    "TASKCFG_ALL_KAFKA_QUOTA_PRODUCER_DEFAULT": "9223372036854775807",
    "TASKCFG_ALL_KAFKA_SOCKET_REQUEST_MAX_BYTES": "104857600",
    "TASKCFG_ALL_KAFKA_LOG_CLEANER_DEDUPE_BUFFER_SIZE": "134217728",
    "CLIENT_STATSD_URI": "http://downloads.mesosphere.com/kafka/assets/java-dogstatsd-client-2.3.jar",
    "BROKER_JAVA_HEAP": "2048",
    "TASKCFG_ALL_KAFKA_LOG_CLEANER_IO_BUFFER_SIZE": "524288",
    "PACKAGE_BUILD_TIME_STR": "Tue Dec 12 2017 22:32:33 +0000",
    "TASKCFG_ALL_KAFKA_BACKGROUND_THREADS": "10",
    "CMD_PREFIX": "",
    "BROKER_PORT": "0",
    "TASKCFG_ALL_KAFKA_CONTROLLED_SHUTDOWN_RETRY_BACKOFF_MS": "5000",
    "PACKAGE_NAME": "confluent-kafka",
    "TASKCFG_ALL_KAFKA_LOG_FLUSH_OFFSET_CHECKPOINT_INTERVAL_MS": "60000",
    "DEPLOY_STRATEGY": "serial",
    "KAFKA_VERSION_PATH": "confluent-3.3.1",
    "TASKCFG_ALL_KAFKA_LOG_ROLL_HOURS": "168",
    "TASKCFG_ALL_KAFKA_REPLICA_LAG_TIME_MAX_MS": "10000",
    "TASKCFG_ALL_KAFKA_LOG_MESSAGE_FORMAT_VERSION": "0.11.0",
    "LIBMESOS_URI": "https://downloads.mesosphere.io/libmesos-bundle/libmesos-bundle-1.10-1.4-63e0814.tar.gz",
    "SERVICE_USER": "service.user",
    "TASKCFG_ALL_KAFKA_REPLICA_FETCH_BACKOFF_MS": "1000",
    "TASKCFG_ALL_KAFKA_REPLICA_FETCH_MAX_BYTES": "1048576",
    "TASKCFG_ALL_KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR": "kafka.confluent_metrics_reporter_topic_replicas",
    "TASKCFG_ALL_KAFKA_LEADER_IMBALANCE_CHECK_INTERVAL_SECONDS": "300",
    "TASKCFG_ALL_KAFKA_NUM_REPLICA_FETCHERS": "1",
    "TASKCFG_ALL_KAFKA_NUM_PARTITIONS": "1",
    "TASKCFG_ALL_KAFKA_SOCKET_RECEIVE_BUFFER_BYTES": "102400",
    "PACKAGE_VERSION": "2.0.3-3.3.1e",
    "KAFKA_STATSD_URI": "http://downloads.mesosphere.com/kafka/assets/kafka-statsd-metrics2-0.5.3.jar",
    "TASKCFG_ALL_KAFKA_SOCKET_SEND_BUFFER_BYTES": "102400",
    "TASKCFG_ALL_KAFKA_OFFSETS_COMMIT_REQUIRED_ACKS": "-1",
    "TASKCFG_ALL_KAFKA_LOG_CLEANER_MIN_CLEANABLE_RATIO": "0.5",
    "TASKCFG_ALL_KAFKA_AUTO_LEADER_REBALANCE_ENABLE": "true",
    "TASKCFG_ALL_KAFKA_LOG_CLEANER_ENABLE": "true",
    "TASKCFG_ALL_KAFKA_ZOOKEEPER_SESSION_TIMEOUT_MS": "6000",
    "TASKCFG_ALL_KAFKA_LOG_CLEANER_BACKOFF_MS": "15000",
    "TASKCFG_ALL_KAFKA_OFFSETS_LOAD_BUFFER_SIZE": "5242880",
    "EXECUTOR_URI": "http://downloads.mesosphere.com/dcos-commons/artifacts/0.30.3/executor.zip",
    "TASKCFG_ALL_KAFKA_ADVERTISE_HOST": "set",
    "MESOS_API_VERSION": "V0",
    "TASKCFG_ALL_KAFKA_OFFSETS_TOPIC_COMPRESSION_CODEC": "0",
    "TASKCFG_ALL_KAFKA_INTER_BROKER_PROTOCOL_VERSION": "0.11.0",
    "TASKCFG_ALL_KAFKA_LOG_RETENTION_HOURS": "168",
    "TASKCFG_ALL_KAFKA_CONTROLLED_SHUTDOWN_ENABLE": "true",
    "TASKCFG_ALL_KAFKA_LOG_FLUSH_SCHEDULER_INTERVAL_MS": "9223372036854775807",
    "TASKCFG_ALL_KAFKA_PRODUCER_PURGATORY_PURGE_INTERVAL_REQUESTS": "1000",
    "KAFKA_JAVA_URI": "https://downloads.mesosphere.com/java/jre-8u144-linux-x64.tar.gz",
    "TASKCFG_ALL_KAFKA_CONNECTIONS_MAX_IDLE_MS": "600000",
    "TASKCFG_ALL_KAFKA_LOG_CLEANER_IO_BUFFER_LOAD_FACTOR": "0.9",
    "TASKCFG_ALL_KAFKA_FETCH_PURGATORY_PURGE_INTERVAL_REQUESTS": "1000",
    "TASKCFG_ALL_KAFKA_DEFAULT_REPLICATION_FACTOR": "kafka.offsets_topic_replication_factor",
    "TASKCFG_ALL_KAFKA_LOG_CLEANER_IO_MAX_BYTES_PER_SECOND": "1.7976931348623157E308",
    "BROKER_KILL_GRACE_PERIOD": "30",
    "KAFKA_URI": "https://packages.confluent.io/archive/3.3/confluent-3.3.1-2.11.tar.gz",
    "TASKCFG_ALL_KAFKA_NUM_NETWORK_THREADS": "3",
    "TASKCFG_ALL_KAFKA_LOG_CLEANUP_POLICY": "delete",
    "TASKCFG_ALL_KAFKA_LOG_ROLL_JITTER_HOURS": "0",
    "TASKCFG_ALL_KAFKA_OFFSETS_RETENTION_CHECK_INTERVAL_MS": "600000",
    "TASKCFG_ALL_KAFKA_QUOTA_WINDOW_NUM": "11",
    "TASKCFG_ALL_KAFKA_LOG_INDEX_SIZE_MAX_BYTES": "10485760",
    "TASKCFG_ALL_KAFKA_NUM_RECOVERY_THREADS_PER_DATA_DIR": "1",
    "TASKCFG_ALL_KAFKA_RESERVED_BROKER_MAX_ID": "1000",
    "TASKCFG_ALL_KAFKA_LOG_INDEX_INTERVAL_BYTES": "4096",
    "TASKCFG_ALL_KAFKA_QUEUED_MAX_REQUESTS": "500",
    "BROKER_DISK_SIZE": "brokers.disk",
    "TASKCFG_ALL_KAFKA_MIN_INSYNC_REPLICAS": "1",
    "TASKCFG_ALL_KAFKA_LOG_SEGMENT_BYTES": "1073741824",
    "TASKCFG_ALL_KAFKA_LOG_RETENTION_BYTES": "-1",
    "FRAMEWORK_LOG_LEVEL": "INFO",
    "TASKCFG_ALL_KAFKA_DELETE_TOPIC_ENABLE": "false",
    "TASKCFG_ALL_KAFKA_COMPRESSION_TYPE": "producer",
    "TASKCFG_ALL_KAFKA_METRICS_NUM_SAMPLES": "2",
    "KAFKA_ZOOKEEPER_URI": "",
    "TASKCFG_ALL_KAFKA_REPLICA_FETCH_MIN_BYTES": "1",
    "TASKCFG_ALL_KAFKA_LEADER_IMBALANCE_PER_BROKER_PERCENTAGE": "10",
    "TASKCFG_ALL_KAFKA_LOG_RETENTION_CHECK_INTERVAL_MS": "300000"
  },
  "healthChecks": [
    {
      "gracePeriodSeconds": 900,
      "ignoreHttp1xx": false,
      "intervalSeconds": 30,
      "maxConsecutiveFailures": 0,
      "path": "/v1/plans/deploy",
      "portIndex": 0,
      "protocol": "HTTP",
      "timeoutSeconds": 30,
      "delaySeconds": 15
    },
    {
      "gracePeriodSeconds": 900,
      "ignoreHttp1xx": false,
      "intervalSeconds": 30,
      "maxConsecutiveFailures": 0,
      "path": "/v1/plans/recovery",
      "portIndex": 0,
      "protocol": "HTTP",
      "timeoutSeconds": 30,
      "delaySeconds": 15
    }
  ],
  "labels": {
    "DCOS_COMMONS_UNINSTALL": "true",
    "DCOS_SERVICE_SCHEME": "http",
    "DCOS_PACKAGE_SOURCE": "https://universe.mesosphere.com/repo",
    "DCOS_SERVICE_NAME": "service.name",
    "DCOS_PACKAGE_FRAMEWORK_NAME": "service.name",
    "DCOS_SERVICE_PORT_INDEX": "0",
    "DCOS_PACKAGE_VERSION": "2.0.3-3.3.1e",
    "DCOS_COMMONS_API_VERSION": "v1",
    "DCOS_PACKAGE_NAME": "confluent-kafka",
    "MARATHON_SINGLE_INSTANCE_APP": "true",
    "HAPROXY_GROUP": "external",
    "HAPROXY_0_MODE": "tcp",
    "HAPROXY_0_BACKEND_SERVER_OPTIONS": "server kafka-broker broker.service.name.l4lb.thisdcos.directory:9092"
  },
  "portDefinitions": [
    {
      "labels": {
        "VIP_0": "/api.service.name:80"
      },
      "name": "api",
      "protocol": "tcp"
    }
  ],
  "user": "service.user",
  "fetch": [
    {
      "uri": "http://downloads.mesosphere.com/dcos-commons/artifacts/0.30.3/executor.zip",
      "extract": true,
      "executable": false,
      "cache": false
    },
    {
      "uri": "https://downloads.mesosphere.com/dcos-commons/artifacts/0.30.3/bootstrap.zip",
      "extract": true,
      "executable": false,
      "cache": false
    },
    {
      "uri": "https://downloads.mesosphere.com/confluent-kafka/assets/2.0.3-3.3.1e/confluent-kafka-scheduler.zip",
      "extract": true,
      "executable": false,
      "cache": false
    },
    {
      "uri": "https://downloads.mesosphere.io/libmesos-bundle/libmesos-bundle-1.10-1.4-63e0814.tar.gz",
      "extract": true,
      "executable": false,
      "cache": false
    },
    {
      "uri": "https://packages.confluent.io/archive/3.3/confluent-3.3.1-2.11.tar.gz",
      "extract": true,
      "executable": false,
      "cache": false
    },
    {
      "uri": "https://downloads.mesosphere.com/java/jre-8u144-linux-x64.tar.gz",
      "extract": true,
      "executable": false,
      "cache": false
    }
  ],
  "upgradeStrategy": {
    "maximumOverCapacity": 0,
    "minimumHealthCapacity": 0
  }
}
